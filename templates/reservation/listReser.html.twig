{% extends 'back.base.html.twig' %}


{% block body %}
    <div style="width:800px; margin:0 auto;">
        <script src="{{ asset('js/jquery.min.js') }}"></script>
        <center><input class="form-control" type="text" id="search" aria-describedby="basic-addon2" placeholder="CHERCHER Reservation..."></center>

    <table class="table table-bordered dataTable" id="tableac" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">

        <tr role="row">
            <th>Event</th>
            <th>Nombre de place</th>
            <th>Prix Total</th>
            <th>Image de l'evenement reservé</th>
        </tr>
        <tbody>

        {% for i in reservations %}
            <tr>
                <td>{{ i.id_Event.nom_event }}</td>
                <td> {{ i.nbrplace }} </td>
                <td>{{ i.id_Event.prix_event * i.nbrplace  }} DT </td>
                <td><img  src="{{ asset('uploads/' ~ i.id_Event.image) }} " width="75" height="50"></td>

                {% if i.approuve ==1 %}
                    <td style="background-color: #2cd258">Approuvée</td>
                {% elseif i.approuve==0 %}
                    <td><button class="btn btn-warning"><a href="{{ url('approuverReservation',{'id':i.id}) }}">Approuver</a></button></td>
                {% endif %}
            </tr>
            <script>
                $(document).ready(function(){
                    $('#search').keyup(function(){
                        search_table($(this).val());
                    });
                    function search_table(value){
                        $('#tableac tbody tr').each(function(){
                            var found = 'false';
                            $(this).each(function(){
                                if($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0)
                                {
                                    found = 'true';
                                }
                            });
                            if(found == 'true')
                            {
                                $(this).show();

                            }
                            else
                            {
                                $(this).hide();

                            }
                        });
                    }
                });
            </script>
            {% endfor %}
            </tbody>
        </table>

        <div class="dataTables_paginate paging_simple_numbers">
            {{ knp_pagination_render(reservations) }}
        </div>
</div>
{% endblock %}